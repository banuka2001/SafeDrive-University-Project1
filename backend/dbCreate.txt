-- SQL query to create the 'users' table
CREATE TABLE users (
  user_id INT NOT NULL AUTO_INCREMENT,
  email_or_phone_number VARCHAR(255) NOT NULL,
  password VARCHAR(255) NOT NULL,
  is_verified TINYINT(1) NOT NULL DEFAULT 0,
  registration_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (user_id),
  UNIQUE (email_or_phone_number)
);

-- SQL query to create the 'customers' table
CREATE TABLE customers (
  customer_id INT NOT NULL AUTO_INCREMENT,
  user_id INT NOT NULL,
  first_name VARCHAR(255) NOT NULL,
  last_name VARCHAR(255) NOT NULL,
  phone_number VARCHAR(20) NOT NULL,
  profile_picture_url VARCHAR(255) NOT NULL,
  vehicle_number VARCHAR(255) NOT NULL,
  vehicle_front_url VARCHAR(255) NOT NULL,
  vehicle_back_url VARCHAR(255) NOT NULL,
  vehicle_side_url VARCHAR(255) NOT NULL,
  PRIMARY KEY (customer_id),
  FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- SQL query to create the 'drivers' table
CREATE TABLE drivers (
  driver_id INT NOT NULL AUTO_INCREMENT,
  user_id INT NOT NULL,
  first_name VARCHAR(255) NOT NULL,
  last_name VARCHAR(255) NOT NULL,
  age INT NULL,
  phone_number VARCHAR(20) NOT NULL,
  experience_years INT NOT NULL,
  nearest_town VARCHAR(255) NULL,
  profile_picture_url VARCHAR(255) NOT NULL,
  is_available TINYINT(1) NOT NULL DEFAULT 1,
  current_location VARCHAR(255) DEFAULT NULL,
  license_front_url VARCHAR(255) NOT NULL,
  license_back_url VARCHAR(255) NOT NULL,
  PRIMARY KEY (driver_id),
  FOREIGN KEY (user_id) REFERENCES users(user_id)
);

CREATE TABLE trips (
    id INT AUTO_INCREMENT PRIMARY KEY,
    customer_id INT NOT NULL,
    driver_id INT,
    pickup_location VARCHAR(255) NOT NULL,
    destination VARCHAR(255) NOT NULL,
    pickup_town VARCHAR(255) NOT NULL,
    trip_time DATETIME NOT NULL,
    status ENUM('pending', 'approved', 'rejected', 'completed') NOT NULL DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id),
    FOREIGN KEY (driver_id) REFERENCES drivers(driver_id)
);
